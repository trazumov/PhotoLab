# Фильтры свертки

В общем случае, применение фильтров предполагает два подхода: 

- перемножение интенсивности пикселей на какие-то фиксированные значения (назовем такие фильтры простыми)
- применение свертки

Рассмотрим примеры наиболее распространенных фильтров из обеих групп.

## Простые фильтры

Пусть R, G, B - значения интенсивностей компонентов цвета: красного, зеленого и синего. Верхний индекс указывает на изображение (I - input, входное; O - output, выходное). Нижние индексы указывают на положение пикселя с данной интенсивностью в матрице изображения.

| Название | Действие                     | Результат | Примечание |
|----------|------------------------------|-----------|-------------|
| Выделение канала | Пример для красного канала:  $`\\R^O_{ij} = G^O_{ij} = B^O_{ij} = I^R_{ij}`$         |  <img src="misc/images/sample-bw-channel.png"  width="512">         | Все каналы пикселя выходного изображения имеют одинаковое значение, соответствующее интенсивности одного из каналов пикселя входного изображения    |
| Обесцвечивание через усреднение | $`R^O_{ij} = G^O_{ij} = B^O_{ij} \frac{1}{3}I^R_{ij}  + \frac{1}{3}I^G_{ij} + \frac{1}{3}I^B_{ij} `$         | <img src="misc/images/sample-bw-average.png"  width="180">          | Все каналы пикселя выходного изображения имеют одинаковое значение соответствующее среднему значению суммы всех каналов пикселя входного изображения           |
| Обесцвечивание по яркости цветов | $`R^O_{ij} = G^O_{ij} = B^O_{ij} = 0.299I^R_{ij}  + 0.587I^G_{ij} + 0.114I^B_{ij}`$        | <img src="misc/images/sample-bw-luma.png"  width="512">          | В данном подходе используются эмпирически подтвержденные фиксированные коэффициенты, соответствующие натуральным ощущениям яркости различных цветов для человеческого глаза. Дело в том, что не все цвета человек воспринимает одинаково ярко.           |
| Обесцвечивание через десатурацию | $`R^O_{ij} = G^O_{ij} = B^O_{ij} = (Min(I^R_{ij} + I^G_{ij} + I^B_{ij}) + Max(I^R_{ij} + I^G_{ij} + I^B_{ij})) / 2`$         | <img src="misc/images/sample-bw-channel.png"  width="512">          | Пиксель можно обесцветить, найдя среднюю точку между максимумом цветовых каналов (R, G, B) и минимумом цветовых каналов (R, G, B)           |
| Негатив | $`R^O_{ij} = 255-I^R_{ij}\\G^O_{ij} = 255-G^I_{ij}\\B^O_{ij} = 255-B^I_{ij}`$         | <img src="misc/images/sample-negative.png"  width="512">          | Негатив осуществляется через инвертирование значения интенсивности для каждого канала в отдельности           |

## Фильтры свертки

| Название | Матрица | Результат | Примечание |
|----------|---------|-----------|------------|
| Исходное изображение | $`\begin{pmatrix} 0 & 0 & 0\\ 0 & 1 & 0 \\ 0 & 0 & 0 \end{pmatrix}`$         | <img src="misc/images/sample-bw-dissat.png"  width="512">          |  |
| Барельеф | $`\begin{pmatrix} -2 & -1 & 0\\ -1 & 1 & 1 \\ 0 & 1 & 2 \end{pmatrix}`$         | <img src="misc/images/sample-ebmoss.png"  width="180">          | |
| Повышение резкости | $`\begin{pmatrix} 0 & -1 & 0\\ -1 & 4 & -1 \\ 0 & -1 & 0 \end{pmatrix}`$         | <img src="misc/images/sample-sharpen.png"  width="512">          | |
| Блочное размытие | $` \frac{1}{9} \begin{pmatrix} 1 & 1 & 1\\ 1 & 1 & 1 \\ 1 & 1 & 1 \end{pmatrix}`$        | <img src="misc/images/sample-box-blur.png"  width="512">          | |
| Гауссово размытие | $`\frac{1}{16} \begin{pmatrix} 1 & 2 & 1\\ 2 & 4 & 2 \\ 1 & 2 & 1 \end{pmatrix}`$         | <img src="misc/images/sample-gaussian-blur.png"  width="512">           | |
| Фильтр Лапласа | $`\begin{pmatrix} -1 & -1 & -1\\ -1 & 8 & -1 \\ -1 & -1 & -1 \end{pmatrix}`$        | <img src="misc/images/sample-outline.png"  width="512">           | Выделение контуров |
| Фильтр Собеля (левый)  | $`\begin{pmatrix} 1 & 0 & -1\\ 2 & 0 & -2 \\ 1 & 0 & -1 \end{pmatrix}`$        | <img src="misc/images/sample-sobel-left.png"  width="512">           | Выделение контуров (слева) |
| Фильтр Собеля (правый)  | $`\begin{pmatrix} -1 & 0 & 1\\ -2 & 0 & 2 \\ -1 & 0 & 1 \end{pmatrix}`$        | <img src="misc/images/sample-sobel-right.png"  width="512">           | Выделение контуров (справа) |
| Фильтр Собеля (комбинированный) | $`\begin{pmatrix} 1 & 0 & -1\\ 2 & 0 & -2 \\ 1 & 0 & -1 \end{pmatrix} + \begin{pmatrix} -1 & 0 & 1\\ -2 & 0 & 2 \\ -1 & 0 & 1 \end{pmatrix}`$        | <img src="misc/images/sample-sobel-left-and-right.png"  width="512">           | Тут знак суммы предполагает сложение интенсивностей двух выходных изображений: для левого Собеля и для правого Собеля, а не применение единственной матрицы, которая равна сумме двух матриц для фильтров Собеля |
